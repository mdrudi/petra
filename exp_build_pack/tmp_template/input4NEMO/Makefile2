SHELL = /bin/sh

############################################################################
#
#        Makefile for input4NEMO 
#
############################################################################
#
#    Copyright 2014 Giacomo Girardi, INGV, Bologna
#
############################################################################
#
# INTEL 
F90 = ifort
P_P = -Dopt_netcdf
P_C = cpp -traditional-cpp
F_O = -c 
F_L = $(F90)
    
RM  = rm -f
                    
EXTINC = -I${NETCDF}/include
EXTLIB = -L${NETCDF}/lib -lnetcdff -lnetcdf -lhdf5_hl -lhdf5 -lcurl


SRC = prep_SLA20_3dvar_V3.f90 prep_SLA20_3dvar_V4.f90 prep_ARGO_3dvar_V3.f90 prep_XBT_3dvar_V3.f90  prep_SLA_3dvar_V3.f90 prep_SLA_3dvar_V4.f90 prep_GLIDER_3dvar_V4.f90

OBJS = $(SRC:.f90=.o)
EXEC = $(SRC:.f90=.exe)


all: $(EXEC)
	@echo $(EXEC) are compiled

$(EXEC) :
	$(F_L)  $(@:.exe=.f90)  -o $@  $(EXTINC) $(EXTLIB) 

#$(EXEC) : $(OBJS)
#	$(F_L)  $(@:.exe=.o)  -o $@ $(EXTLIB) 

.f90.o :
	$(F90) $(F_O) $(P_P) $(EXTINC)  -o $@ $<
 
%.o: %.f90 
	$(F90) $(F_O) $(P_P) $(EXTINC)  -o $@ $<
	
clean:
	$(RM) *.o *.mod $(EXEC)
